<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
		*{margin: 0;padding: 0;}
		div{position: fixed;top: 100px;left: 100px;width: 100px;height: 100px;background: #f00;}
	</style>
</head>
<body>
	<div id="div"></div>

	<script type="text/javascript">
		window.onload=function(){
			var div = document.getElementById('div');

			addEvent(div,'mousedown',function(ev){
				var oEvent = ev||event;
				var disX = oEvent.clientX-div.offsetLeft;
				var disY = oEvent.clientY-div.offsetTop;

				addEvent(document,'mousemove',yindong);
				addEvent(document,'mouseup',yindongg);

				function yindong(ev){
					var oEvent = ev||event;
					var left = oEvent.clientX-disX;
					var top = oEvent.clientY-disY;

					div.style.left = left+'px';
					div.style.top = top+'px';
				}
				function yindongg(){
					removeEvent(document,'mousemove',yindong);
					removeEvent(document,'mouseup',yindongg)
				}

			});



		}





		function addEvent(obj,sEv,fn){
			if (obj.attachEvent) {
				obj.attachEvent('on'+sEv,fn);
			}else{
				obj.addEventListener(sEv,fn,false);
			}
		}

		function removeEvent(obj,sEv,fn){
			if (obj.detachEvent) {
				obj.detachEvent('on'+sEv,fn);
			}else{
				obj.removeEventListener(sEv,fn,false);
			}
		}
	</script>
</body>
</html>