<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
    }
    
    div {
        position: relative;
        width: 700px;
        height: 400px;
        border: 5px solid #f00;
        margin: 50px auto;
    }
    
    span {
    	opacity: 0;
        position: absolute;
        background-color: red;

        background-image: url(images/1.jpg);
        background-repeat: no-repeat;

    }
    </style>
</head>

<body>
    <div>
        <img src="images/0.jpg" width="700" height="400">

    </div>

    <script type="text/javascript" src="jquery-1.12.4.js"></script>
    <script type="text/javascript">
    	var W = 700;
    	var H = 400;
    	var cols = 7;
    	var rows = 4;

    	var nH = H/rows;
    	var nW = W/cols;
    	var num=0;
    	var aImg=['images/0.jpg','images/1.jpg','images/2.jpg']
    	var oImg=$('img');

    	for(var r=0;r<rows;r++){
    		for(var c=0;c<cols;c++){
    			var nTop = nH*r;
    			var nLeft = nW*c;

    			var span = $('<span></span>');
    			span.css({
    				width:nW+'px',
    				height:nW+'px',
    				left:nLeft+'px',
    				top:nTop+'px',
    				'background-position':-nLeft+'px -'+nTop+'px'
    			});
    			span.appendTo('div');
    		}
    	}

    	$(document).click(function(){
    		// var span=$('span');
    		// var now = 0;

    		// var timer= setInterval(function(){

    		// 	span.eq(now).animate({
    		// 		opacity:1
    		// 	})

    		// 		now++;
    		// 	if (now ==span.length) {
    		// 		clearInterval(timer)
    		// 	}
    		// },100)
    		num++
    		var aSpan=$('span');
    		var now = 0;
    		var timer=setInterval(function(){
    			(function(index){
	    			aSpan.eq(now).animate({
	    				opacity:1
	    			},{
	    				complete:function(){
	    					if (index == aSpan.length-1) {
	    						oImg.attr({
	    							'src':aImg[num%aImg.length]
	    						});
	    						aSpan.css({
	    							opacity:0,
	    							'background-image':'url('+aImg[(num+1)%aImg.length]+')'
	    						})
	    					}
	    				}
    				})
    			})(now);
    			now++;
    			if (now == aSpan.length) {
    				clearInterval(timer)
    			}
    		},100)



    	

    	})

    </script>
</body>

</html>
